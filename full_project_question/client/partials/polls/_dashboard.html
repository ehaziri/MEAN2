<ng-include src="'/partials/shared/_nav.html'"></ng-include>

<section ng-init='getPolls()'>
	<a href="/#!/create">Create a New Poll</a>
	<h3>Current Polls:</h3>
	{{ questions }}
	
	<input type="text" name="search" placeholder="Search..." ng-model='filterQuestion'>
	<table border="1">
		<thead>
			<th>Name</th>
			<th>Survey_Question</th>
			<th>Date_Posted</th>
			<th>Action</th>
		</thead>
		<tbody>
			<tr ng-repeat="poll in polls | filter: filterQuestion track by $index">
				<td>{{ poll._user.username }}</td>
				<td><a href="#!/poll/{{poll._id}}">{{ poll.question }}</a></td>
				<td>{{ poll.createdAt }}</td>
				<td><a href="" ng-click='delete(poll._id)' ng-if="currentUserId == poll._user._id">Delete</a></td>
			</tr>
		</tbody>
	</table>
</section>